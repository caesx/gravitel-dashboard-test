import * as React from 'react';
import {FunctionComponent} from 'react';
import {useQuery} from '@apollo/react-hooks';
import {NetworkStatus} from 'apollo-client';
import DashboardStat from './dashboard.graphql';
import Chart from './chart.component';
import {useDashboardStyles} from './dashboard.styles';

const Dashboard: FunctionComponent = () => {

	let {
		data: {dashboard = undefined} = {dashboard: undefined},
		loading,
		networkStatus,
		client,
	} = useQuery(DashboardStat);

	let styles = useDashboardStyles();

	let handleLogOut = () => {
		localStorage.removeItem('token');
		client.resetStore();
	};

	if (loading) {
		return (<div>{'Загружаем статистику...'}</div>);
	}

	if (dashboard && networkStatus === NetworkStatus.ready) {
		let {lists, dialogs, scenarios} = dashboard;
		return (
			<div style={styles.dashboardRoot}>
				<label
					htmlFor={'charts'}
					style={styles.dashboardLabel}
				>
					<span>{'Сводка'}</span>
					<div
						style={styles.dashboardLeaveButton}
						title={'Выйти'}
						onClick={handleLogOut}
					>
						<svg
							xmlns="http://www.w3.org/2000/svg"
							id="svg8"
							version="1.1"
							viewBox="0 0 5.0341725 4.4936805"
							height="20px"
							width="20px"
						>
							<g
								fill="currentColor"
								transform="translate(-43.748163,-77.893432)"
								id="layer1"
							>
								<path
									id="path828"
									transform="matrix(0.26458333,0,0,0.26458333,43.748163,77.893432)"
									d="M 12.447266 -0.03515625 L 8.2402344 -0.013671875 C 6.0228959 -0.0018601151 4.1970961 0.017652681 3.8574219 0.03125 L 3.359375 0.033203125 L 3.3496094 0.0390625 L 3.34375 0.0390625 L 3.3320312 0.046875 L 3.3144531 0.056640625 L 3.2988281 0.05859375 L 2.3046875 0.68359375 C 2.2455151 0.72073301 2.2465927 0.72360683 2.1894531 0.75976562 L 1.2519531 1.3457031 L 1.2421875 1.359375 L 1.2304688 1.3671875 L 0.72070312 2.1484375 C 0.44040639 2.578125 0.16013278 3.0164449 0.09765625 3.1210938 L 0.08203125 3.1464844 L -0.009765625 3.2871094 L -0.009765625 3.2988281 L -0.01171875 3.3027344 L -0.01171875 3.3046875 L -0.015625 3.3105469 L -0.015625 3.3144531 L -0.017578125 3.3183594 L -0.017578125 3.3261719 L -0.021484375 3.3300781 L -0.021484375 3.3320312 L -0.013671875 4.7578125 L -0.013671875 4.828125 L -0.013671875 4.8984375 L -0.013671875 4.9042969 C -0.027658419 6.7001953 -0.015039609 9.4839479 0.01171875 11.515625 L 0.01953125 13.791016 L 0.02734375 13.802734 L 0.03515625 13.8125 L 0.04296875 13.822266 L 0.04296875 13.837891 L 0.078125 13.876953 C 0.078311154 13.877366 0.077938477 13.890293 0.078125 13.890625 C 0.084376328 13.901761 0.16503841 13.983 0.18164062 14.003906 C 0.24859152 14.098962 0.4599671 14.310895 0.62109375 14.476562 C 0.73554773 14.595371 0.76390626 14.634646 0.89453125 14.765625 C 0.90739451 14.778454 0.91479419 14.784016 0.92773438 14.796875 C 0.93728278 14.806421 0.94355865 14.810771 0.953125 14.820312 C 0.95812495 14.82537 0.95984065 14.828932 0.96484375 14.833984 C 0.97059019 14.839709 0.97667268 14.84389 0.98242188 14.849609 C 0.98872493 14.85596 0.99174391 14.858896 0.99804688 14.865234 C 1.0344039 14.900893 1.0309195 14.90091 1.0703125 14.939453 C 1.0718929 14.941008 1.0706802 14.941799 1.0722656 14.943359 C 1.0844921 14.95539 1.0991375 14.966591 1.1113281 14.978516 L 1.4609375 15.365234 L 1.7363281 15.568359 C 1.740454 15.571783 1.7519073 15.582707 1.7558594 15.585938 C 1.7592117 15.588867 1.7662537 15.596762 1.7695312 15.599609 C 1.770139 15.600108 1.7728342 15.601069 1.7734375 15.601562 C 1.7791965 15.606386 1.7954417 15.626492 1.8007812 15.630859 C 1.8094268 15.638257 1.8318237 15.661255 1.8398438 15.667969 C 1.9857091 15.790076 2.3167994 16.050608 2.6132812 16.285156 C 2.626361 16.29538 2.635198 16.304144 2.6484375 16.314453 C 2.6560752 16.320445 2.6642637 16.328034 2.671875 16.333984 L 2.7890625 16.425781 C 2.8181786 16.448621 2.8389688 16.466242 2.8671875 16.488281 L 3.5410156 17.015625 L 3.5703125 17.015625 L 3.5722656 17.015625 L 3.5859375 17.027344 L 4.4980469 17.015625 L 4.9257812 17.015625 C 6.5582812 17.01538 11.167517 16.941081 12.083984 16.900391 L 12.716797 16.871094 L 12.722656 16.871094 L 12.724609 16.871094 L 12.726562 16.871094 L 12.708984 15.503906 C 12.708871 15.493552 12.70715 15.494686 12.707031 15.484375 C 12.706975 15.478735 12.707089 15.478297 12.707031 15.472656 C 12.707031 15.472656 12.707031 15.470703 12.707031 15.470703 C 12.706966 15.465042 12.707098 15.464645 12.707031 15.458984 C 12.705196 15.309824 12.700095 15.308766 12.697266 15.173828 C 12.69204 14.858186 12.691221 14.47439 12.677734 14.335938 L 12.662109 14.177734 C 12.660723 14.170049 12.659565 14.082183 12.658203 14.080078 C 12.658203 14.080078 12.65625 14.080078 12.65625 14.080078 C 12.65625 14.080078 12.654297 14.080078 12.654297 14.080078 C 12.654297 14.080078 12.654297 14.078125 12.654297 14.078125 C 12.654297 14.078125 12.654297 14.076172 12.654297 14.076172 C 12.654297 14.076172 12.652344 14.076172 12.652344 14.076172 L 12.652344 14.074219 L 12.648438 14.046875 L 12.636719 14.046875 L 12.636719 14.044922 L 12.623047 14.044922 L 12.621094 14.023438 L 12.619141 14.023438 L 12.617188 14.023438 L 8.984375 14.023438 C 8.783898 14.023178 8.7490716 14.021626 8.5273438 14.021484 L 8 14.021484 L 4.4511719 14.001953 L 3.7050781 13.208984 L 3.3222656 12.800781 L 2.9414062 12.394531 L 2.9433594 11.892578 L 2.9628906 8.6445312 C 2.9756842 6.5820313 2.9975704 4.6666683 3.0117188 4.3886719 L 3.0214844 4.1796875 C 3.03022 4.0740725 3.0376579 3.978893 3.0566406 3.9199219 C 3.0587629 3.9146117 3.0620889 3.9096753 3.0644531 3.9042969 C 3.0877829 3.8388437 3.1284375 3.7805487 3.1894531 3.703125 C 3.232158 3.6487539 3.2925404 3.5850569 3.3554688 3.515625 C 3.4258845 3.4363521 3.4903185 3.3645829 3.5488281 3.3046875 C 3.6217503 3.234143 3.701538 3.149024 3.7402344 3.125 C 3.7505117 3.1194239 3.7631411 3.117577 3.7734375 3.1132812 C 3.8383804 3.0893467 5.2239205 3.0599472 6.8242188 3.03125 L 7.6542969 3.0175781 C 9.7873437 2.9830721 11.738559 2.9428144 11.990234 2.9277344 L 12.447266 2.9003906 L 12.447266 2.8984375 L 12.447266 2.8964844 L 12.447266 2.8945312 L 12.449219 2.8945312 L 12.447266 2.6542969 L 12.447266 1.4609375 C 12.447266 1.446024 12.447274 1.4521937 12.447266 1.4375 L 12.447266 1.4355469 L 12.447266 1.4335938 L 12.447266 1.4316406 L 12.447266 1.4257812 L 12.447266 0.234375 L 12.449219 -0.005859375 L 12.447266 -0.005859375 L 12.447266 -0.0078125 L 12.447266 -0.029296875 L 12.447266 -0.03125 L 12.447266 -0.03515625 z M 13.996094 3.3339844 L 13.996094 3.3613281 L 13.992188 3.3574219 L 13.986328 3.3535156 L 13.986328 3.3574219 L 13.980469 3.3535156 L 13.998047 4.2167969 C 13.997996 4.2597903 13.997972 4.3061186 13.998047 4.3515625 C 13.996358 4.5269156 13.994141 4.6678144 13.994141 4.8691406 L 13.994141 5.203125 C 13.98598 5.6574142 13.979323 6.1048224 13.970703 6.1699219 C 13.965492 6.1916994 13.963664 6.2655326 13.957031 6.2695312 C 13.936186 6.2814125 12.856893 6.3337245 11.541016 6.3847656 C 11.451152 6.3879949 11.39765 6.3895136 11.310547 6.3925781 C 10.549386 6.4193581 9.7352121 6.4561083 9.5019531 6.4726562 L 9.078125 6.5019531 L 9.078125 6.5214844 L 9.0703125 6.5214844 L 9.0703125 6.5234375 L 9.0683594 6.5234375 L 9.0683594 6.5273438 L 9.0664062 6.5273438 L 9.0527344 6.5292969 L 9.0449219 6.53125 L 9.0429688 6.53125 L 9.0429688 6.5371094 L 9.0546875 7.03125 C 9.0544204 7.0475834 9.0529462 7.0455874 9.0527344 7.0625 C 9.052693 7.0662577 9.0527731 7.0723864 9.0527344 7.0761719 C 9.0472893 7.5452561 9.0651115 8.1878919 9.0917969 8.7734375 C 9.1011704 8.998555 9.1080068 9.1887588 9.1210938 9.3691406 C 9.122528 9.3897288 9.1235363 9.405949 9.125 9.4257812 C 9.1257801 9.4359116 9.126164 9.4471216 9.1269531 9.4570312 C 9.1274257 9.4654327 9.1284515 9.5003042 9.1289062 9.5078125 C 9.1312099 9.5458449 9.1345562 9.5478888 9.1367188 9.5800781 C 9.138413 9.5985936 9.1388999 9.6271013 9.140625 9.6445312 C 9.1411049 9.655088 9.1421198 9.6737299 9.1425781 9.6835938 C 9.1429497 9.6871652 9.1441584 9.6937466 9.1445312 9.6972656 C 9.1489781 9.7827197 9.152054 9.8456132 9.15625 9.8671875 C 9.1566764 9.8693583 9.1578246 9.8709258 9.1582031 9.8730469 L 9.1601562 10.029297 L 9.4160156 10.039062 C 9.4218807 10.039667 9.4215587 10.040373 9.4277344 10.041016 C 9.4443359 10.042742 9.5825055 10.049824 9.6269531 10.052734 C 9.771981 10.067317 10.109 10.093799 10.416016 10.115234 C 13.332369 10.295214 13.728065 10.325738 13.810547 10.361328 C 13.960933 10.401479 13.985009 10.528105 14.117188 11.761719 C 14.119893 11.786556 14.120239 11.780863 14.123047 11.806641 C 14.163998 12.183322 14.189568 12.349599 14.216797 12.533203 C 14.220603 12.571463 14.22566 12.619165 14.228516 12.648438 C 14.228616 12.649437 14.228416 12.651356 14.228516 12.652344 C 14.234564 12.71083 14.238898 12.749469 14.242188 12.765625 C 14.242188 12.765625 14.242188 12.767578 14.242188 12.767578 C 14.24254 12.769174 14.243772 12.769912 14.244141 12.771484 L 14.246094 12.78125 C 14.246094 12.78125 14.248047 12.78125 14.248047 12.78125 C 14.248798 12.784043 14.249194 12.786356 14.25 12.789062 C 14.250321 12.790725 14.251659 12.809188 14.251953 12.810547 L 14.240234 12.798828 L 14.257812 12.851562 L 14.257812 12.853516 L 14.257812 12.855469 C 14.257876 12.85566 14.257751 12.86116 14.257812 12.861328 C 14.257812 12.861328 14.259766 12.859375 14.259766 12.859375 C 14.260022 12.859944 14.261482 12.874616 14.261719 12.875 C 14.261719 12.875 14.263672 12.875 14.263672 12.875 C 14.263672 12.875 14.265625 12.875 14.265625 12.875 C 14.265625 12.875 14.265625 12.876953 14.265625 12.876953 C 14.265625 12.876953 14.265625 12.878906 14.265625 12.878906 L 14.269531 12.945312 L 14.308594 12.90625 L 14.308594 12.904297 L 14.337891 12.873047 C 14.339091 12.872591 14.340717 12.873624 14.341797 12.873047 C 14.347844 12.869558 14.353769 12.865044 14.361328 12.859375 C 14.376446 12.847658 14.394964 12.830654 14.416016 12.810547 C 14.421461 12.805431 14.429734 12.796584 14.435547 12.791016 C 14.443563 12.783735 14.44846 12.779664 14.457031 12.771484 C 14.524798 12.706779 14.612933 12.617497 14.705078 12.519531 C 14.741735 12.482703 14.769939 12.457918 14.808594 12.417969 C 14.890623 12.333163 15.351496 11.85737 15.582031 11.619141 C 15.598449 11.602715 15.616216 11.584985 15.632812 11.568359 C 15.645128 11.555901 15.653704 11.545665 15.666016 11.533203 C 15.725148 11.473916 15.784661 11.414974 15.845703 11.353516 C 16.12241 11.075056 16.364284 10.837693 16.658203 10.537109 C 16.658203 10.537109 16.658203 10.535156 16.658203 10.535156 C 16.658203 10.535156 16.658203 10.533203 16.658203 10.533203 C 16.658203 10.533203 16.658203 10.53125 16.658203 10.53125 C 17.247441 9.9286177 17.837135 9.3219089 18.277344 8.8535156 C 18.277344 8.8535156 18.277344 8.8515625 18.277344 8.8515625 C 18.277344 8.8515625 18.277344 8.8496094 18.277344 8.8496094 C 18.277344 8.8496094 18.277344 8.8476562 18.277344 8.8476562 C 18.350927 8.7693611 18.335762 8.7786231 18.400391 8.7089844 C 18.418165 8.6907617 18.503615 8.6021776 18.517578 8.5878906 C 18.656325 8.4459316 18.781507 8.3108842 18.873047 8.2089844 C 18.918817 8.1580363 18.956532 8.1158458 18.982422 8.0839844 L 19.035156 8.0292969 L 19.033203 8.0273438 L 19.039062 8.0195312 L 19.035156 8.015625 L 19.037109 8.0136719 L 19.039062 8.0117188 L 19.033203 8.0058594 L 19.035156 8.0039062 L 18.990234 7.9609375 C 18.98947 7.9595835 18.989093 7.9564527 18.988281 7.9550781 C 18.988281 7.9550781 18.986328 7.953125 18.986328 7.953125 C 18.984255 7.9497485 18.984754 7.9468881 18.982422 7.9433594 C 18.952186 7.8987609 18.897967 7.8423238 18.810547 7.7636719 C 18.794536 7.7492618 18.560295 7.5312023 18.515625 7.4902344 C 18.485769 7.46149 18.392443 7.37537 18.359375 7.34375 C 18.305243 7.2904877 18.319601 7.2965602 18.259766 7.2382812 C 17.129112 6.1357929 15.205908 4.3547637 14.484375 3.7460938 C 14.451637 3.7168711 14.348948 3.6211151 14.322266 3.5976562 C 14.250347 3.5347702 14.242105 3.5364136 14.205078 3.5078125 C 14.18234 3.487708 14.129899 3.439817 14.115234 3.4277344 C 14.115234 3.4277344 14.113281 3.4257812 14.113281 3.4257812 C 14.090465 3.4070134 14.077227 3.3967107 14.066406 3.390625 C 14.066406 3.390625 14.064453 3.390625 14.064453 3.390625 C 14.062799 3.3897122 14.062168 3.389403 14.060547 3.3886719 C 14.058268 3.3870618 14.055002 3.385805 14.052734 3.3847656 L 14.046875 3.3828125 L 13.996094 3.3339844 z "
								/>
							</g>
						</svg>
					</div>
				</label>
				<div
					id={'charts'}
					style={styles.dashboardChartsSection}
				>
					<Chart
						data={scenarios}
						title={'Сценарии'}
					/>
					<Chart
						data={lists}
						title={'Списки'}
					/>
					<Chart
						data={dialogs}
						title={'Диалоги'}
					/>
				</div>
			</div>
		);
	}

	return (
		<div>
			{'Что то произошло? - Нет данных.'}
		</div>
	);
};

export default Dashboard;
